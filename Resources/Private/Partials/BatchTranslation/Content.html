<h1><f:translate key="LLL:EXT:autotranslate/Resources/Private/Language/locallang_mod.xlf:mlang_labels_tablabel"/></h1>

<div class="panel panel-default">
    <div class="table-fit">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th></th>
                    <th><f:translate key="LLL:EXT:autotranslate/Resources/Private/Language/locallang_db.xlf:autotranslate_batch.page"/></th>
                    <th><f:translate key="LLL:EXT:autotranslate/Resources/Private/Language/locallang_db.xlf:autotranslate_batch.priority"/></th>
                    <th><f:translate key="LLL:EXT:autotranslate/Resources/Private/Language/locallang_db.xlf:autotranslate_batch.sys_language_uid"/></th>
                    <th><f:translate key="LLL:EXT:autotranslate/Resources/Private/Language/locallang_db.xlf:autotranslate_batch.translate"/></th>
                    <th><f:translate key="LLL:EXT:autotranslate/Resources/Private/Language/locallang_db.xlf:autotranslate_batch.translated"/></th>
                    <th><f:translate key="LLL:EXT:autotranslate/Resources/Private/Language/locallang_db.xlf:autotranslate_batch.frequency"/></th>
                    <th><f:translate key="LLL:EXT:autotranslate/Resources/Private/Language/locallang_db.xlf:autotranslate_batch.mode"/></th>
                    <th><f:translate key="LLL:EXT:autotranslate/Resources/Private/Language/locallang_db.xlf:autotranslate_batch.error"/></th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <f:for each="{batchItemsRecursive}" as="record">
                    <tr class="{record.class} {f:if(condition:record.hidden, then:'t3-form-field-container-inline-hidden')} {f:if(condition:record.waitingForRun, then:'warning')} {f:if(condition:record.finishedRun, then:'success')} {f:if(condition:record.error, then:'danger')}" title="id={record.uid}">
                        <td><input type="checkbox"></td>
                        <td class="nowrap" title="id={record.pid}">[{record.pid}] {record.pageTitle}</td>
                        <td><f:translate key="LLL:EXT:autotranslate/Resources/Private/Language/locallang_db.xlf:autotranslate_batch.priority.{record.priority}"/></td>
                        <td title="id={record.sysLanguageUid}">{record.sysLanguageTitle}</td>
                        <td><f:format.date format="d.m.Y - H:i">{record.translate}</f:format.date></td>
                        <td>
                            <f:if condition="{record.translated}">
                                <f:then>
                                    <f:format.date format="d.m.Y - H:i">{record.translated}</f:format.date>
                                </f:then>
                                <f:else>
                                    <small>-</small>
                                </f:else>
                            </f:if>
                        </td>
                        <td title="{rcord.frequencyDateInterval}"><f:translate key="LLL:EXT:autotranslate/Resources/Private/Language/locallang_db.xlf:autotranslate_batch.frequency.{record.frequency}"/></td>
                        <td><f:translate key="LLL:EXT:autotranslate/Resources/Private/Language/locallang_db.xlf:autotranslate_batch.mode.{record.mode}"/></td>
                        <td title="{record.error}">{record.error -> f:format.crop(maxCharacters: 10)}</td>
                        <td class="nowrap">
                            <div class="btn-group">
                                <f:if condition="{record.hidden}">
                                    <f:then>
                                        <a class="btn btn-default" href="{be:moduleLink(route:'tce_db', query:'data[tx_autotranslate_batch_item][{record.uid}][hidden]=0', currentUrlParameterName:'redirect')}" title="{f:translate(key: 'visibility.unhide')}">
                                            <core:icon identifier="actions-edit-unhide" />
                                        </a>
                                    </f:then>
                                    <f:else>
                                        <a class="btn btn-default" href="{be:moduleLink(route:'tce_db', query:'data[tx_autotranslate_batch_item][{record.uid}][hidden]=1', currentUrlParameterName:'redirect')}" title="{f:translate(key: 'visibility.hide')}">
                                            <core:icon identifier="actions-edit-hide" />
                                        </a>
                                    </f:else>
                                </f:if>

                                <be:link.editRecord uid="{record.uid}" table="tx_autotranslate_batch_item" returnUrl="{f:be.uri(route: moduleName, parameters:'{id:pageUid}')}" class="btn btn-default">
                                    <core:icon identifier="actions-file-edit"/>
                                </be:link.editRecord>
                                <button
                                    type="submit"
                                    class="btn btn-default t3js-modal-trigger"
                                    data-target-form="autotranslate_batch_item_remove_{record.uid}"
                                    title="{f:translate(key:'delete')}"
                                    data-severity="warning"
                                    data-title="{f:translate(key:'LLL:EXT:backend/Resources/Private/Language/locallang_alt_doc.xlf:label.confirm.delete_record.title')}"
                                    data-bs-content="{f:translate(key:'confirm',arguments:'{0:record.uid}')}"
                                    data-button-close-text="{f:translate(key:'LLL:EXT:core/Resources/Private/Language/locallang_common.xlf:cancel')}"
                                    data-button-ok-text="{f:translate(key:'LLL:EXT:backend/Resources/Private/Language/locallang_alt_doc.xlf:buttons.confirm.delete_record.yes')}">
                                    <core:icon identifier="actions-edit-delete" />
                                </button>
                                <form action="{be:moduleLink(route:'tce_db', currentUrlParameterName:'redirect')}" name="autotranslate_batch_item_remove_{record.uid}" id="autotranslate_batch_item_remove_{record.uid}" method="post">
                                    <input name="cmd[tx_autotranslate_batch_item][{record.uid}][delete]=1" type="hidden" value="{record.uid}">
                                </form>
                            </div>
                        </td>
                    </tr>
                </f:for>
            <tfoot>
                <tr>
                    <td colspan="10">
                        {batchItemsRecursive -> f:count()} Entries
                    </td>
                </tr>
            </tfoot>
        </table>
    </div>
</div>
